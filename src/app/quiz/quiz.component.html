<div class="conatiner mt-5">
    <div class="card">
        <div class="d-flex justify-content-between p3 mt-3">
            <div class="image">
                <img src="https://media.istockphoto.com/id/1464511713/vector/quiz-logo-isolated-on-white-background.jpg?s=612x612&w=0&k=20&c=VuTteQpXb_5I8jsJ5xCalHk1iPQMX9WsSf_y-qH7kIQ="
                    alt="Quiz-Icon" width=130>
            </div>
            <div class="quiz-header">
                <h4 style="font-family:cursive">Angular & Typescript Quize!</h4>
                <span class="font-weight-bold">Welcome!!! <b style="font-family:cursive">{{ currentUserFirstName }}</b></span>
            </div>
        </div>
        <ng-container *ngIf="!isQuizCompleted">
            <div class="d-flex justify-content-between py-3">
                <div class="question-remains">
                    Question {{currentQuestionIndex + 1}} of {{ getQuestionsFormArray().length }}
                </div>
                <div class="timer">
                    <h5> {{ timeLeft | timeformat }} ⏱️</h5>
                </div>
            </div>
            <div class="progress">
                <div class="progress-bar" role="progressbar" style="width: 25%" [ngStyle]="{'width':progress+'%'}"
                    aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
                </div>
            </div>
            <form [formGroup]="quizForm">
                <div formArrayName="questions" class="Question">
                    <div *ngFor="let questionGroup of getQuestionsFormArray().controls; let i = index">
                        <ng-container *ngIf="i == currentQuestionIndex">
                            <div [formGroupName]="i" class="card">
                                <h5>{{ questionGroup.get('question')?.value }}</h5>
                                <div class="options" *ngFor="let option of getOptions(i)">
                                    <label>
                                        <div class="option mt-2"
                                            [class.selected]="questionGroup.get('selectedAnswer')?.value === option">
                                            <input type="radio" formControlName="selectedAnswer" [value]="option">
                                            {{option}}
                                        </div>
                                    </label>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>

                <div class="quiz-footer">
                    <button class="btn btn-primary" id="back-btn" (click)="previouseQuestion()"
                        [disabled]="currentQuestionIndex === 0">
                        Back
                    </button>

                    <button class="btn btn-primary" id="next-btn" (click)="nextQuestion()"
                        [hidden]="currentQuestionIndex === getQuestionsFormArray().length-1">
                        Next
                    </button>

                    <button type="submit" class="btn btn-primary" id="next-btn" (click)="onCalculateScore()"
                        [hidden]="currentQuestionIndex !== getQuestionsFormArray().length-1"
                        data-bs-toggle="modal" data-bs-target="#confirmModel">
                        submit
                    </button>
                </div>
            </form>
        </ng-container>

        <ng-container *ngIf="isQuizCompleted">
            <div class="row d-flex justify-content-between p-3">
                <img src="https://media.istockphoto.com/id/1125716911/vector/party-popper-with-confetti.jpg?s=612x612&w=0&k=20&c=sAyofM-MQ5TL-pLyFseV9Vke_W2zyYX1btP90oGJQZE="
                 alt="" class="img-fluid col-sm-12 mx-auto" style="width:30%" >
                <div class="result text-center col-md-6 col-sm-12">
                    <h2>Congratulation!!! <br>
                        You have completed the Quiz.<br>
                        Below is you result:
                    </h2>
                    <p>Total Attempted Questions : <b> {{ getQuestionsFormArray().length }}</b></p>
                    <p>Total Correct Answered : 
                        <b>{{ correctAnswer}} </b>
                    </p>
                    <p>Total Wrong Answered : 
                        <b>{{ incorrectAnswer}}</b> 
                    </p>
                    <h4>Your Score : 
                        <b>{{ score }}</b>
                    </h4>
                </div>
            </div>
        </ng-container>
    </div>
    <div class="container d-flex justify-content-center align-item-center mt-4">
        <a routerLink="/dashboard" class="btn btn-primary btn-md">Back To Dashboard</a>
        <a routerLink="/quiz-list" class="btn btn-primary btn-md mx-2" >Quiz list</a>
    </div>
</div>